---
import BlogPage from "../../layouts/BlogPage.astro";
import Friend from "../../components/friend/Friend.astro";
import FriendList from "../../components/friend/FriendList.astro";
import FriendCategoryTitle from "../../components/friend/FriendCategoryTitle.astro";
import MarkdownBody from "../../components/MarkdownBody.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import headPicture from "../../assets/headpicture.jpg";
import { Image } from "astro:assets";

// 友链数据
const links = [
    {
        name: "Ryanjxy's Blog",
        url: "https://ryanjxy123.github.io",
        avatarUrl: "https://raw.githubusercontent.com/Ryanjxy123/picbed/main/data20260218001557991.png",
        description: "Do not go gentle into that good night."
    },
];

// 本站信息
const siteInfo = {
    name: SITE_TITLE,
    url: "https://ryanjxy.cn",
    description: SITE_DESCRIPTION,
    avatarUrl: "https://raw.githubusercontent.com/Ryanjxy123/picbed/main/data20260218001557991.png"
};
---

<BlogPage title="友链" description="来看看我的小伙伴们吧！">
    <!-- 友链展示区 -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-8 text-left dark:text-white">友链</h2>
        <FriendList>
            {links.map((link) => (
                <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 hover:shadow-xl hover:scale-105">
                    <Friend
                        key={link.name}
                        url={link.url}
                        name={link.name}
                        description={link.description}
                        avatarUrl={link.avatarUrl}
                    />
                </div>
            ))}
        </FriendList>
    </section>

    <!-- 本站信息区 -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold mb-8 text-left dark:text-white">本站信息</h2>
        <div class="p-8 -ml-8">
            <!-- 表单式布局 -->
            <div class="space-y-4 pl-6 border-l-4 border-blue-500 pt-2 pb-2">
                <!-- Name 字段 -->
                <div class="flex items-center justify-between">
                    <label class="text-gray-400 dark:text-gray-500 text-sm font-medium w-20">Name</label>
                    <div
                        class="flex-1 ml-4 cursor-pointer select-none"
                        data-value={siteInfo.name}
                        onclick="copyToClipboard(event, this)"
                    >
                        <div class="bg-gray-100 dark:bg-gray-800 rounded-md p-3 font-mono text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200">
                            {siteInfo.name}
                        </div>
                    </div>
                </div>

                <!-- Link 字段 -->
                <div class="flex items-center justify-between">
                    <label class="text-gray-400 dark:text-gray-500 text-sm font-medium w-20">Link</label>
                    <div
                        class="flex-1 ml-4 cursor-pointer select-none"
                        data-value={siteInfo.url}
                        onclick="copyToClipboard(event, this)"
                    >
                        <div class="bg-gray-100 dark:bg-gray-800 rounded-md p-3 font-mono text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 break-all">
                            {siteInfo.url}
                        </div>
                    </div>
                </div>

                <!-- Avatar 字段 -->
                <div class="flex items-center justify-between">
                    <label class="text-gray-400 dark:text-gray-500 text-sm font-medium w-20">Avatar</label>
                    <div
                        class="flex-1 ml-4 cursor-pointer select-none"
                        data-value={siteInfo.avatarUrl}
                        onclick="copyToClipboard(event, this)"
                    >
                        <div class="bg-gray-100 dark:bg-gray-800 rounded-md p-3 font-mono text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 break-all">
                            {siteInfo.avatarUrl}
                        </div>
                    </div>
                </div>

                <!-- Desc 字段 -->
                <div class="flex items-center justify-between">
                    <label class="text-gray-400 dark:text-gray-500 text-sm font-medium w-20">Desc</label>
                    <div
                        class="flex-1 ml-4 cursor-pointer select-none"
                        data-value={siteInfo.description}
                        onclick="copyToClipboard(event, this)"
                    >
                        <div class="bg-gray-100 dark:bg-gray-800 rounded-md p-3 font-mono text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200">
                            {siteInfo.description}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</BlogPage>

<script>
    // 复制功能
    document.addEventListener('DOMContentLoaded', () => {
        // 为所有可复制区域添加事件监听
        document.querySelectorAll('[data-value]').forEach(element => {
            element.addEventListener('click', async (e) => {
                const parent = e.currentTarget;
                const value = parent.dataset.value;
                const originalContent = parent.querySelector('div').textContent;

                try {
                    await navigator.clipboard.writeText(value);

                    // 显示成功反馈
                    const contentDiv = parent.querySelector('div');
                    contentDiv.textContent = 'Copied!';
                    contentDiv.classList.add('bg-green-200', 'dark:bg-green-800', 'text-green-800', 'dark:text-green-200');

                    setTimeout(() => {
                        contentDiv.textContent = originalContent;
                        contentDiv.classList.remove('bg-green-200', 'dark:bg-green-800', 'text-green-800', 'dark:text-green-200');
                    }, 1000);
                } catch (err) {
                    console.error('复制失败:', err);
                    // 降级方案
                    const textArea = document.createElement('textarea');
                    textArea.value = value;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);

                    // 显示成功反馈
                    const contentDiv = parent.querySelector('div');
                    contentDiv.textContent = 'Copied!';
                    contentDiv.classList.add('bg-green-200', 'dark:bg-green-800', 'text-green-800', 'dark:text-green-200');

                    setTimeout(() => {
                        contentDiv.textContent = originalContent;
                        contentDiv.classList.remove('bg-green-200', 'dark:bg-green-800', 'text-green-800', 'dark:text-green-200');
                    }, 1000);
                }
            });
        });
    });
</script>
