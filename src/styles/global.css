/*! Global CSS */

@import "tailwindcss";
@import "katex/dist/katex.min.css";

/* 引入本地 Comic Sans MS 字体 */
@font-face {
    font-family: 'ComicSansWeb';
    src: url('/fronts/comic.ttf') format('truetype');
    font-display: swap;
}

@plugin "@tailwindcss/typography";

/* Tailwind v4: 强制启用 class-based dark mode */
@variant dark (&:where(.dark, .dark *));

html {
    scroll-behavior: smooth;
    scroll-padding-top: 80px;
}

/* === 模块2：动态背景切换 === */
:root {
    /* 默认（白天）图片路径 */
    --hero-bg-image: url('/header_day.webp');
}

html.dark {
    /* 暗色（夜晚）图片路径 */
    --hero-bg-image: url('/header_night.webp');
}

/* === 模块3：视觉风格重塑 === */
/* 暗色模式强制背景色 - 接近纯黑（仅 html，作为兜底色） */
html.dark {
    background-color: #050505;
}

/* 关键：body 必须透明，否则会盖住 Header 的背景图 */
html.dark body {
    background-color: transparent !important;
}

/* 暗色模式下移除可能造成脏感的阴影 */
html.dark .shadow-sm,
html.dark .shadow-md,
html.dark .shadow-lg,
html.dark .shadow-xl {
    --tw-shadow: 0 0 0 0 transparent;
    --tw-shadow-colored: 0 0 0 0 transparent;
}

/* 暗色模式保留悬停阴影效果 */
html.dark .hover\:shadow-lg:hover,
html.dark .hover\:shadow-xl:hover {
    --tw-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.6);
    box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
}

@theme {
    --font-sans: ChillRoundF, -apple-system, "Microsoft YaHei", sans-serif;

    --color-primary-50: var(--color-sky-50);
    --color-primary-100: var(--color-sky-100);
    --color-primary-200: var(--color-sky-200);
    --color-primary-300: var(--color-sky-300);
    --color-primary-400: var(--color-sky-400);
    --color-primary-500: var(--color-sky-500);
    --color-primary-600: var(--color-sky-600);
    --color-primary-700: var(--color-sky-700);
    --color-primary-800: var(--color-sky-800);
    --color-primary-900: var(--color-sky-900);
    --color-primary-950: var(--color-sky-950);

    --color-accent-50: var(--color-amber-50);
    --color-accent-100: var(--color-amber-100);
    --color-accent-200: var(--color-amber-200);
    --color-accent-300: var(--color-amber-300);
    --color-accent-400: var(--color-amber-400);
    --color-accent-500: var(--color-amber-500);
    --color-accent-600: var(--color-amber-600);
    --color-accent-700: var(--color-amber-700);
    --color-accent-800: var(--color-amber-800);
    --color-accent-900: var(--color-amber-900);
    --color-accent-950: var(--color-amber-950);
}

/* Hack: 改善 kbd 间距不够的问题 */
.prose kbd:has(kbd) {
    padding: 0.5rem;
}

.prose kbd {
    margin: 0 0.125rem;
}

.prose a:hover {
    border-color: var(--color-accent-300);
    background-color: var(--color-accent-100);
}

@media (prefers-color-scheme: dark) {
    .prose a:hover {
        border-color: var(--color-accent-700);
        background-color: var(--color-accent-950);
    }

}

/* Shiki 双主题变量映射 */
html.dark .astro-code, html.dark .astro-code span {
  color: var(--shiki-dark) !important;
  background-color: var(--shiki-dark-bg) !important;
}